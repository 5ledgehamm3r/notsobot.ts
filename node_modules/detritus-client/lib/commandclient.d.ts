import { EventEmitter } from 'detritus-utils';
import { ShardClient } from './client';
import { ClusterClient, ClusterClientOptions, ClusterClientRunOptions } from './clusterclient';
import { Command, CommandCallbackRun, CommandOptions } from './command/command';
import { Context } from './command/context';
import { CommandEvents } from './command/events';
import { CommandRatelimit, CommandRatelimitOptions } from './command/ratelimit';
import { BaseCollection } from './collections';
import { Message, Typing } from './structures';
export interface CommandClientOptions extends ClusterClientOptions {
    activateOnEdits?: boolean;
    ignoreMe?: boolean;
    maxEditDuration?: number;
    mentionsEnabled?: boolean;
    onPrefixCheck?: CommandClientPrefixCheck;
    prefix?: string;
    prefixes?: Array<string>;
    prefixSpace?: boolean;
    ratelimit?: CommandRatelimitOptions;
    ratelimits?: Array<CommandRatelimitOptions>;
    useClusterClient?: boolean;
}
export declare type CommandClientPrefixes = Array<string> | Set<string> | string;
export declare type CommandClientPrefixCheck = (context: Context) => CommandClientPrefixes | Promise<CommandClientPrefixes>;
export interface CommandClientAdd extends CommandOptions {
    _class?: any;
}
export interface CommandClientRunOptions extends ClusterClientRunOptions {
}
export interface CommandAttributes {
    content: string;
    prefix: string;
}
/**
 * Command Client, hooks onto the ShardClient to provide easier command handling
 * @category Clients
 */
export declare class CommandClient extends EventEmitter {
    readonly _clientListeners: {
        [key: string]: Function | null;
    };
    activateOnEdits: boolean;
    client: ClusterClient | ShardClient;
    commands: Array<Command>;
    ignoreMe: boolean;
    maxEditDuration: number;
    mentionsEnabled: boolean;
    prefixes: {
        custom: Set<string>;
        mention: Set<string>;
    };
    ran: boolean;
    ratelimits: Array<CommandRatelimit>;
    replies: BaseCollection<string, Message>;
    onPrefixCheck?: CommandClientPrefixCheck;
    constructor(token: ShardClient | string, options?: CommandClientOptions);
    readonly rest: import("detritus-client-rest").Client | import("./rest").RestClient;
    setActivateOnEdits(value: boolean): void;
    setMaxEditDuration(value: number): void;
    setMentionsEnabled(value: boolean): void;
    setPrefixSpace(value: boolean): void;
    add(options: Command | CommandClientAdd | string, run?: CommandCallbackRun): CommandClient;
    addMultiple(commands?: Array<CommandOptions>): CommandClient;
    addMultipleIn(directory: string, isAbsolute?: boolean): Promise<CommandClient>;
    addMentionPrefixes(): void;
    clear(): void;
    getAttributes(context: Context): Promise<CommandAttributes | null>;
    getCommand(attributes: CommandAttributes): Command | null;
    getPrefixes(context: Context): Promise<Set<string>>;
    resetListeners(): void;
    setListeners(): void;
    kill(): void;
    run(options?: CommandClientRunOptions): Promise<ClusterClient | ShardClient>;
    handle(name: string, event: {
        differences: any | null | undefined;
        message: Message | null;
        typing: Typing | null | undefined;
    }): Promise<void>;
    handleDelete(name: string, payload: {
        raw: {
            id: string;
        };
    }): Promise<void>;
    on(event: string, listener: Function): this;
    on(event: 'commandError', listener: (payload: CommandEvents.CommandError) => any): this;
    on(event: 'commandFail', listener: (payload: CommandEvents.CommandFail) => any): this;
    on(event: 'commandNone', listener: (payload: CommandEvents.CommandNone) => any): this;
    on(event: 'commandRan', listener: (payload: CommandEvents.CommandRan) => any): this;
    on(event: 'commandRatelimit', listener: (payload: CommandEvents.CommandRatelimit) => any): this;
    on(event: 'commandRunError', listener: (payload: CommandEvents.CommandRunError) => any): this;
    on(event: 'killed', listener: () => any): this;
}
